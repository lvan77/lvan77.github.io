## 并发特性 
1. 原子性: 一次或多次操作时，所有操作要么全部执行要么都不执行   
2. 可见性: 当一个共享变量被一个线程修改时，其他线程能立即查看到该变量修改后的值
3. 有序性: 程序代码执行按先后顺序（因为jvm 时候有可能打乱执行顺序，只要结果相同会自动优化程序执行顺序 这种情况叫指令重排）


synchronized关键字和Lock相关的工具类可以保证原子性、可见性和有序性，
volatile关键字可以保证可见性和有序性(禁止指令重排)，不能保证原子性。


**happens-before 四大原则**
程序次序规则：一个线程内（不适用多线程），按照代码顺序，书写在前面的操作先行发生于书写在后面的操作
监视器锁规则：对一个监视器的 解锁操作 先行发生于后面对同一个锁的 占有 锁操作
volatile变量规则：对一个变量的写操作先行发生于后面对这个变量的读操作。也就是程序代码如果是 先写再读，那么就不能重排序先读再写。
传递规则：如果操作A先行发生于操作B，而操作B又先行发生于操作C，则可以得出操作A先行发生于操作C